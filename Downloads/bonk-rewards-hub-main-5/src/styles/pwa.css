/* PWA-specific styles for native app behavior */

/* Safe area handling for devices with notches */
:root {
  --safe-area-inset-top: env(safe-area-inset-top, 0);
  --safe-area-inset-right: env(safe-area-inset-right, 0);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0);
  --safe-area-inset-left: env(safe-area-inset-left, 0);
}

/* PWA standalone mode detection - only for actual PWA installations */
@media (display-mode: standalone) and (min-device-width: 320px) {
  body {
    /* Add padding for safe areas in standalone mode */
    padding-top: var(--safe-area-inset-top);
    padding-right: var(--safe-area-inset-right);
    padding-bottom: var(--safe-area-inset-bottom);
    padding-left: var(--safe-area-inset-left);
  }
  
  /* Hide elements that shouldn't appear in PWA mode */
  .browser-only {
    display: none !important;
  }
  
  /* PWA-specific header styling */
  .pwa-header {
    background: var(--background);
    border-bottom: 1px solid var(--border);
    padding-top: var(--safe-area-inset-top);
  }
  
  /* Adjust bottom navigation for safe area */
  .bottom-navigation {
    padding-bottom: calc(1rem + var(--safe-area-inset-bottom));
  }
}

/* Browser mode - show all browser UI */
@media (display-mode: browser) {
  .pwa-only {
    display: none !important;
  }
}

/* iOS-specific adjustments */
@supports (-webkit-touch-callout: none) {
  /* iOS Safari specific styles */
  .ios-safe-area {
    padding-top: var(--safe-area-inset-top);
    padding-bottom: var(--safe-area-inset-bottom);
  }
  
  /* Prevent iOS bounce scroll in PWA */
  @media (display-mode: standalone) {
    body {
      position: fixed;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    
    #root {
      width: 100%;
      height: 100%;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
  }
}

/* Android-specific adjustments */
@media (display-mode: standalone) and (orientation: portrait) {
  /* Android Chrome PWA adjustments */
  .android-pwa-header {
    background: var(--background);
    height: calc(56px + var(--safe-area-inset-top));
  }
}

/* Enhanced touch target improvements for PWA */
@media (display-mode: standalone) {
  /* Ensure all interactive elements meet accessibility standards */
  button, 
  a, 
  [role="button"],
  [role="tab"],
  [role="menuitem"] {
    min-height: 44px;
    min-width: 44px;
    position: relative;
  }
  
  /* Improve tap targets with proper spacing */
  .touch-target {
    padding: 12px;
    margin: 4px;
  }

  /* Enhanced touch areas for critical actions */
  .touch-target-critical {
    min-height: 48px;
    min-width: 48px;
    padding: 16px;
    margin: 8px;
  }

  /* Card and list item touch optimization */
  .card,
  .list-item,
  [role="listitem"] {
    min-height: 56px;
    padding: 16px;
    margin: 4px 0;
  }

  /* Bottom navigation touch optimization */
  .bottom-nav-item {
    min-height: 56px;
    padding: 8px 4px;
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
}

/* Status bar handling */
.status-bar-spacer {
  height: var(--safe-area-inset-top);
  background: var(--background);
}

/* PWA installation prompt styles */
.install-prompt {
  position: fixed;
  bottom: calc(80px + var(--safe-area-inset-bottom));
  left: 1rem;
  right: 1rem;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 0.75rem;
  padding: 1rem;
  box-shadow: 0 10px 30px -10px hsl(var(--foreground) / 0.1);
  z-index: 50;
}

@media (display-mode: standalone) {
  .install-prompt {
    display: none;
  }
}